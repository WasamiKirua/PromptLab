<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Marmor Look | NanoBanana</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&family=M+PLUS+Rounded+1c:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --cream: #fff6f2;
        --ink: #2f2320;
        --rose: #ff8fb8;
        --rose-deep: #ff6ea6;
        --sky: #7cc9ff;
        --mint: #8ee9c5;
        --lemon: #ffe28a;
      }

      body[data-theme="dark"] {
        --cream: #120f1a;
        --ink: #f6e9f1;
        --rose: #ff8fb8;
        --rose-deep: #ff6ea6;
        --sky: #7cc9ff;
        --mint: #8ee9c5;
        --lemon: #ffe28a;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "M PLUS Rounded 1c", sans-serif;
        color: var(--ink);
        background-color: var(--cream);
        background-image:
          radial-gradient(circle at 8% 12%, rgba(255, 224, 240, 0.9), transparent 45%),
          radial-gradient(circle at 88% 10%, rgba(255, 236, 193, 0.8), transparent 38%),
          radial-gradient(circle at 20% 80%, rgba(194, 238, 255, 0.75), transparent 40%),
          radial-gradient(circle at 80% 78%, rgba(197, 255, 228, 0.7), transparent 45%);
        min-height: 100vh;
      }

      body[data-theme="dark"] {
        background-image:
          radial-gradient(circle at 12% 14%, rgba(84, 46, 80, 0.7), transparent 45%),
          radial-gradient(circle at 86% 12%, rgba(58, 56, 94, 0.65), transparent 40%),
          radial-gradient(circle at 18% 82%, rgba(42, 88, 92, 0.5), transparent 45%),
          radial-gradient(circle at 82% 78%, rgba(120, 66, 88, 0.55), transparent 50%);
      }

      .nav-shell {
        position: sticky;
        top: 0;
        z-index: 20;
        padding: 1.25rem 1.5rem;
      }

      .nav-bar {
        max-width: 1100px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1.5rem;
        padding: 1rem 1.5rem;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.78);
        box-shadow: 0 18px 40px rgba(255, 142, 186, 0.18);
        border: 1px solid rgba(255, 143, 184, 0.4);
        backdrop-filter: blur(12px);
      }

      body[data-theme="dark"] .nav-bar {
        background: rgba(26, 20, 34, 0.78);
        border-color: rgba(255, 143, 184, 0.45);
        box-shadow: 0 18px 40px rgba(22, 16, 28, 0.55);
      }

      .nav-logo {
        font-family: "Cherry Bomb One", cursive;
        font-size: 1.3rem;
        letter-spacing: 0.02em;
        color: var(--ink);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
      }

      .nav-links {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        flex-wrap: wrap;
      }

      .nav-links a {
        position: relative;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.6rem 1.4rem 0.6rem 1.1rem;
        border-radius: 999px;
        font-weight: 700;
        text-decoration: none;
        color: var(--ink);
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), rgba(255, 246, 242, 0.8));
        border: 1px solid rgba(255, 143, 184, 0.4);
        box-shadow: 0 10px 24px rgba(124, 201, 255, 0.18);
        transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      }

      body[data-theme="dark"] .nav-links a {
        background: linear-gradient(135deg, rgba(36, 26, 44, 0.9), rgba(28, 22, 36, 0.85));
        border-color: rgba(255, 143, 184, 0.35);
        box-shadow: 0 10px 22px rgba(16, 12, 22, 0.6);
      }

      .nav-links a::before {
        content: "";
        width: 0.55rem;
        height: 0.55rem;
        border-radius: 50%;
        background: var(--lemon);
        box-shadow: 0 0 0 4px rgba(255, 226, 138, 0.35);
      }

      body[data-theme="dark"] .nav-links a::before {
        box-shadow: 0 0 0 4px rgba(255, 226, 138, 0.2);
      }

      .nav-links a[aria-current="page"] {
        background: linear-gradient(135deg, rgba(255, 143, 184, 0.35), rgba(255, 226, 138, 0.3));
        border-color: rgba(255, 110, 166, 0.65);
        box-shadow: 0 18px 30px rgba(255, 143, 184, 0.25);
      }

      body[data-theme="dark"] .nav-links a[aria-current="page"] {
        background: linear-gradient(135deg, rgba(255, 143, 184, 0.3), rgba(255, 226, 138, 0.18));
        box-shadow: 0 16px 28px rgba(18, 14, 24, 0.55);
      }

      .nav-links a:hover {
        transform: translateY(-2px) scale(1.02);
        border-color: rgba(255, 110, 166, 0.65);
        box-shadow: 0 14px 28px rgba(255, 143, 184, 0.2);
      }

      body[data-theme="dark"] .nav-links a:hover {
        box-shadow: 0 14px 26px rgba(10, 8, 14, 0.6);
      }
    </style>
  </head>
  <body>
    <div class="nav-shell">
      <nav class="nav-bar" aria-label="Primary">
        <a class="nav-logo" href="/">NanoBanana</a>
        <div class="nav-links">
          <a href="/nano-banana">NanoBanana</a>
          <a href="/caption-to-prompt">CaptionToPrompt</a>
          <a href="/text-to-prompt">TextToPrompt</a>
          <a href="/marmorlook" aria-current="page">Marmor Look</a>
          <a href="/">Home</a>
        </div>
      </nav>
    </div>
    <main class="mx-auto flex min-h-screen max-w-5xl flex-col px-6 pb-16 pt-6">
      <header class="flex flex-col gap-4">
        <h1 class="text-4xl font-semibold leading-tight text-slate-900">Marmor Look</h1>
        <p class="max-w-2xl text-lg text-slate-600">
          Generate an image from the Marmor Look JSON template.
        </p>
      </header>

      <section class="mt-10 grid gap-6 lg:grid-cols-[0.6fr_0.4fr]">
        <div class="rounded-3xl border border-rose-200 bg-white/80 p-6 shadow-[0_18px_40px_rgba(255,143,184,0.16)]">
          <form
            action="/marmorlook"
            method="post"
            class="flex flex-col gap-5"
            enctype="multipart/form-data"
          >
            <button
              type="submit"
              class="inline-flex items-center justify-center rounded-2xl bg-[#ff8fb8] px-6 py-3 text-base font-semibold text-[#2f2320] transition hover:bg-[#ff6ea6]"
            >
              Generate Image
            </button>
          </form>

          {% if generation_status == "completed" %}
          <div class="mt-6 rounded-2xl border border-rose-200 bg-white/80 p-4">
            <p class="text-sm font-semibold text-emerald-600">Generation completed!</p>
          </div>
          {% elif generation_status == "failed" %}
          <div class="mt-6 rounded-2xl border border-rose-200 bg-white/80 p-4">
            <p class="text-sm font-semibold text-rose-600">Generation failed.</p>
            {% if generation_error %}
            <p class="mt-2 text-sm text-slate-600">{{ generation_error }}</p>
            {% endif %}
          </div>
          {% endif %}
        </div>

        <div class="rounded-3xl border border-rose-200 bg-white/80 p-6 shadow-[0_18px_40px_rgba(255,143,184,0.16)]">
          <h2 class="text-lg font-semibold text-slate-900">Preview</h2>
          <p class="mt-2 text-sm text-slate-600">
            Preview image for the current JSON template.
          </p>
          <img
            src="/static/images/marmor_look.png"
            alt="Marmor look preview"
            class="mt-4 h-56 w-full rounded-2xl object-cover"
            onerror="this.onerror=null;this.src='/static/images/modern_live_bedroom.png';"
          />
        </div>
      </section>

      {% if generated_image_path %}
      <section class="mt-10">
        <h2 class="text-2xl font-semibold text-slate-900">Generated image</h2>
        <div class="mt-4 overflow-hidden rounded-3xl border border-rose-200 bg-white/80 p-4">
          <img
            src="{{ generated_image_path }}"
            alt="Generated result"
            class="h-auto w-full rounded-2xl"
          />
        </div>
      </section>
      {% endif %}
    </main>
    <script>
      (() => {
        const stored = localStorage.getItem("home-theme");
        if (stored === "dark") {
          document.body.dataset.theme = "dark";
        }
      })();
    </script>
  </body>
</html>
